<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <title>Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    button { padding: 10px 20px; margin: 10px 0; font-size: 16px; }
    pre { background: #f0f0f0; padding: 10px; border-radius: 5px; }
  </style>
</head>
<body>

<h3>Mini App</h3>

<!-- Form maâ€™lumot kiritish uchun -->
<label>Ismingiz:</label>
<input type="text" id="firstName" placeholder="Ali"><br>

<label>Familiyangiz:</label>
<input type="text" id="lastName" placeholder="Adhamov"><br>

<button id="saveBtn">Saqlash</button>
<pre id="log"></pre>

<script>
const tg = Telegram.WebApp;
tg.ready();

const log = (t) => {
  document.getElementById("log").textContent += t + "\n";
};

// Foydalanuvchi maâ€™lumotini localStorage ga saqlash
document.getElementById("saveBtn").onclick = () => {
  const data = {
    first_name: document.getElementById("firstName").value || "",
    last_name: document.getElementById("lastName").value || "",
    platform: tg.platform || "",
    version: tg.version || "",
    timestamp: Date.now()
  };

  // localStorage ga saqlash
  localStorage.setItem("miniAppData", JSON.stringify(data));
  log("âœ… Maâ€™lumot saqlandi!");
  log(JSON.stringify(data, null, 2));

  alert("Maâ€™lumot saqlandi âœ…");
};

// Mini App ochilganda localStorage dan oâ€˜qib chiqarish
window.onload = () => {
  const savedData = localStorage.getItem("miniAppData");
  if (savedData) {
    log("ðŸ’¾ Oldingi saqlangan maâ€™lumot:");
    log(savedData);
  }
};
</script>

</body>
</html>
