<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <title>Mini App JSON saqlash</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { font-family: Arial; padding: 20px; }
    button { padding: 10px 20px; margin: 10px 0; font-size: 16px; }
    pre { background: #f0f0f0; padding: 10px; border-radius: 5px; }
  </style>
</head>
<body>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
const tg = Telegram.WebApp;
tg.ready();

async function send() {
  const initData = tg.initData;

  if (!initData) {
    alert("❌ initData yo‘q");
    return;
  }

  const res = await fetch("https://save-mini-app.adhamov20072.workers.dev/", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      initData: initData,
      platform: tg.platform,
      version: tg.version,
      time: Date.now()
    })
  });

  const text = await res.text();
  alert("✅ Yuborildi: " + text);

  tg.close();
}
</script>

<button onclick="send()">Saqlash</button>

</body>
</html>


