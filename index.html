<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <title>Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

<h3>Mini App</h3>
<button onclick="send()">Botga yuborish</button>
<pre id="log"></pre>
<script>
const tg = Telegram.WebApp;
tg.ready();

// ENG MUHIM QATOR
const dataString = tg.initData || "";

console.log("InitData:", dataString);

function send() {
  tg.sendData(dataString); // TOâ€˜LIQ SIGNED STRING
  tg.close();
}
</script>

<script>
const log = (t) => {
  document.getElementById("log").textContent += t + "\n";
};

const tg = Telegram.WebApp;
tg.ready();

const u = tg.initDataUnsafe?.user || {};

const dataString = [
  u.id || "",
  u.first_name || "",
  u.last_name || "",
  u.username || "",
  tg.platform || "",
  tg.version || "",
  Date.now()
].join("|");

log("ðŸ“¤ Yuboriladigan STRING:");
log(dataString);

function send() {
  tg.sendData(dataString); // FAQAT STRING
  tg.close();
}
</script>

</body>
</html>

