<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <title>Mini App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

<h3>Mini App</h3>
<button onclick="send()">Botga yuborish</button>

<pre id="log"></pre>

<script>
const log = (t) => {
  document.getElementById("log").textContent += t + "\n";
};

const tg = Telegram.WebApp;
tg.ready();

log("âœ… Telegram WebApp JS yuklandi");
log("ğŸŒ Version: " + tg.version);

const user = tg.initDataUnsafe?.user;

const dataToSend = {
  number: 1,
  platform: tg.platform,
  version: tg.version,
  user_from_webapp: user ? {
    id: user.id,
    first_name: user.first_name || ""
  } : null,
  time: Date.now()
};

log("ğŸ“¦ Tayyor data:");
log(JSON.stringify(dataToSend, null, 2));

function send() {
  tg.sendData(JSON.stringify(dataToSend));
  tg.close();
}
</script>

</body>
</html>
